extends layout.pug

block content
  h1 Welcome #{user.id} !
  img(src=user.images[0].url, class = "circular_image")

  table
    each t in userTracks
      tr
      - var artist_name = t.track.artists && t.track.artists.length > 0 ? t.track.artists[0].name : "Unknown"
      - var track_name = t.track.name
      - var track_preview = t.track.preview_url
      - var artist_id = t.track.artists && t.track.artists.length > 0 ? t.track.artists[0].id : "Unknown"
      - var track_id = t.track.id


      td #{artist_name}
      td: a(href='/recommendations?artists=' + artist_id + '&track=' + track_id) #{track_name}
      td: a(href=track_preview) Preview
